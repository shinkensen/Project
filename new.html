<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IntelliNotes - Upload Notes & Ask Questions</title>
    
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š IntelliNotes</h1>
            <p class="subtitle">Upload your notes to an already existing pool, and get instant answers from AI</p>
        </header>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" onclick="window.location.href = `upload.html`">ğŸ“¤ Upload Notes</button>
            <button class="tab-btn" onclick="window.location.href = `chatbot.html`">ğŸ’¬ Chatbot</button>
            <button class="tab-btn" onclick="window.location.href = `gallery.html`">ğŸ–¼ï¸ Gallery</button>
        </div>

        <main>
            <!-- Upload Tab -->
            <div class="tab-content active" id="upload-tab">
                <section class="upload-section">
                    <h2>Upload Your Notes</h2>
                    <div class="subject-selector">
                        <label for="subjectSelect">Select Subject:</label>
                        <select id="subjectSelect">
                            <option value="mathematics">ğŸ“ Mathematics</option>
                            <option value="science">ğŸ”¬ Science</option>
                            <option value="history">ğŸ“œ History</option>
                            <option value="literature">ğŸ“– Literature</option>
                            <option value="computer-science">ğŸ’» Computer Science</option>
                            <option value="languages">ğŸŒ Languages</option>
                            <option value="arts">ğŸ¨ Arts</option>
                            <option value="other">ğŸ“Œ Other</option>
                        </select>
                    </div>
                    <div class="upload-area" id="uploadArea">
                        <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                        <p class="upload-text">Drag & drop your notes here</p>
                        <p class="upload-subtext">or click to browse</p>
                        <p class="file-types">Supported: PDF, TXT, DOCX, MD</p>
                        <input type="file" id="fileInput" accept=".pdf,.txt,.docx,.doc,.md" multiple hidden>
                    </div>
                    
                    <!-- Uploaded Files List -->
                    <div class="uploaded-files" id="uploadedFiles">
                        <h3>Uploaded Notes (<span id="fileCount">0</span>)</h3>
                        <div class="files-list" id="filesList"></div>
                    </div>
                </section>
            </div>

            <!-- Chatbot Tab -->
            <div class="tab-content" id="chatbot-tab">
                <section>
                    <h2>AI Chatbot Assistant</h2>
                    <div class="chatbot-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="chat-empty-state">
                                <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                                </svg>
                                <p>Start a conversation with the AI assistant!</p>
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <textarea 
                                id="chatInput" 
                                class="chat-input"
                                placeholder="Type your message here..." 
                                rows="3"
                            ></textarea>
                            <button id="sendButton" class="send-button" onclick="sendMessage()">
                                <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                                </svg>
                                Send
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Gallery Tab -->
            <div class="tab-content" id="gallery-tab">
                <section class="gallery-section">
                    <div class="gallery-header">
                        <h2>Notes Gallery</h2>
                        <div class="subject-filters" id="subjectFilters">
                            <button class="filter-btn active" onclick="filterGallery('all')">All</button>
                            <button class="filter-btn mathematics" onclick="filterGallery('mathematics')">ğŸ“ Math</button>
                            <button class="filter-btn science" onclick="filterGallery('science')">ğŸ”¬ Science</button>
                            <button class="filter-btn history" onclick="filterGallery('history')">ğŸ“œ History</button>
                            <button class="filter-btn literature" onclick="filterGallery('literature')">ğŸ“– Literature</button>
                            <button class="filter-btn computer-science" onclick="filterGallery('computer-science')">ğŸ’» CS</button>
                            <button class="filter-btn languages" onclick="filterGallery('languages')">ğŸŒ Languages</button>
                            <button class="filter-btn arts" onclick="filterGallery('arts')">ğŸ¨ Arts</button>
                            <button class="filter-btn other" onclick="filterGallery('other')">ğŸ“Œ Other</button>
                        </div>
                    </div>
                    <div class="gallery-grid" id="galleryGrid">
                        <div class="gallery-empty">
                            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                            </svg>
                            <p>No notes uploaded yet</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>Built for Student Hackpad Hackathon 2025</p>
        </footer>
    </div>

    <script>
        // Tab Navigation Function
        function switchTab(tabName) {
            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // Remove active class from all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Add active class to corresponding content
            const activeTab = document.getElementById(tabName + '-tab');
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }

        // Upload Area Functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const filesList = document.getElementById('filesList');
        const fileCount = document.getElementById('fileCount');
        let uploadedFiles = [];

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('drag-over');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('drag-over');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('drag-over');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });

        function handleFiles(files) {
            Array.from(files).forEach(file => {
                uploadedFiles.push(file);
                addFileToList(file);
            });
            updateFileCount();
        }

        function addFileToList(file) {
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            fileItem.innerHTML = `
                <div class="file-info">
                    <div class="file-icon">${getFileExtension(file.name).toUpperCase()}</div>
                    <div class="file-details">
                        <span class="file-name">${file.name}</span>
                        <span class="file-size">${formatFileSize(file.size)}</span>
                    </div>
                </div>
                <button class="delete-button" onclick="deleteFile(this, '${file.name}')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                </button>
            `;
            filesList.appendChild(fileItem);
        }

        function deleteFile(button, fileName) {
            uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
            button.closest('.file-item').remove();
            updateFileCount();
        }

        function updateFileCount() {
            fileCount.textContent = uploadedFiles.length;
        }

        function getFileExtension(filename) {
            return filename.split('.').pop() || 'FILE';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Chatbot Functionality
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');

        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Remove empty state if it exists
            const emptyState = chatMessages.querySelector('.chat-empty-state');
            if (emptyState) emptyState.remove();

            // Add user message
            addChatMessage(message, 'user');
            chatInput.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response (replace with actual API call)
            setTimeout(() => {
                removeTypingIndicator();
                addChatMessage('This is a placeholder response. Connect to your backend API for actual AI responses.', 'ai');
            }, 1500);
        }

        // Allow Enter key to send message
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        function addChatMessage(content, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            messageDiv.innerHTML = `
                <div class="message-header ${sender}">
                    ${sender === 'user' ? 'You' : 'AI Assistant'}
                </div>
                <div class="message-content">${content}</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.id = 'typingIndicator';
            indicator.innerHTML = '<span></span><span></span><span></span>';
            chatMessages.appendChild(indicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        // Gallery Filter Functionality
        function filterGallery(subject) {
            // Update active filter button
            const filterButtons = document.querySelectorAll('.subject-filters .filter-btn');
            filterButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filter gallery cards
            const cards = document.querySelectorAll('.gallery-card');
            cards.forEach(card => {
                if (subject === 'all' || card.dataset.subject === subject) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }